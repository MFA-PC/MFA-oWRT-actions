# NanoPi R5S
# Rockchip RK3568B2
# 1G x1 (RTL8211F-CG), 2.5G x2 (RTL8125BG on PCIe bus)
# aarch64_generic

# NanoPi R5S Configuration for Custom OpenWrt Firmware

CONFIG_TARGET_rockchip=y
CONFIG_TARGET_rockchip_armv8=y
CONFIG_TARGET_rockchip_armv8_DEVICE_friendlyarm_nanopi-r5s=y
CONFIG_TARGET_ARCH_PACKAGES="aarch64_generic"
CONFIG_TARGET_ROOTFS_PARTSIZE=1024
### –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –∏—Ç–æ–≥–æ–≤–æ–º –∫–æ–Ω—Ñ–∏–≥–µ - CONFIG_TARGET_ARCH_PACKAGES="aarch64_generic"

# üóÇ –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (SquashFS + ZSTD –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_KERNEL_FS_SQUASHFS=y
CONFIG_KERNEL_FS_SQUASHFS_ZSTD=y

# üî• –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
CONFIG_KERNEL_LRNG=y               # –£–ª—É—á—à–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª (—É—Å–∫–æ—Ä—è–µ—Ç –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—é)
CONFIG_KERNEL_ZSWAP=y               # –ö–æ–º–ø—Ä–µ—Å—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π swap –≤ RAM (–∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏)
CONFIG_KERNEL_ZSMALLOC=y            # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–ª–ª–æ–∫–∞—Ç–æ—Ä –ø–∞–º—è—Ç–∏
CONFIG_KERNEL_SCHED_AUTOGROUP=y     # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—É–ª—É—á—à–∞–µ—Ç –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å)

# üåê –°–µ—Ç–µ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (2.5G Ethernet, NAT, PPPoE, VPN)
CONFIG_KERNEL_NF_CONNTRACK=y        # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è NAT, PPPoE, VPN)
CONFIG_KERNEL_SKB_FIXED_SIZE_2K=y   # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–µ–≤—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ –ø–æ–¥ 2.5G Ethernet
CONFIG_KERNEL_SKB_RECYCLE_MAX_PREALLOC_SKBS=16384
CONFIG_KERNEL_SKB_RECYCLE_SIZE=1856
CONFIG_KERNEL_SKB_RECYCLER_PREALLOC=y

# üöÄ –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (OpenSSL, WireGuard, VPN)
CONFIG_KERNEL_CRYPTO_DEV_ROCKCHIP=y        # –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–∞ Rockchip RK3568B2
CONFIG_KERNEL_CRYPTO_DEV_ROCKCHIP_RSA=y    # –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ RSA
CONFIG_KERNEL_CRYPTO_DEV_ROCKCHIP_DCP=y    # –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ ChaCha20-Poly1305 –∏ AES-GCM

CONFIG_OPENSSL_ENGINE=y                    # –ê–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ OpenSSL
CONFIG_OPENSSL_WITH_ASM=y                   # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è OpenSSL
CONFIG_OPENSSL_WITH_CHACHA_POLY1305=y       # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ChaCha20-Poly1305 (—É—Å–∫–æ—Ä—è–µ—Ç VPN)
CONFIG_OPENSSL_WITH_PSK=y                   # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Pre-Shared Key (PSK)
CONFIG_OPENSSL_WITH_TLS13=y                 # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TLS 1.3 (VPN, HTTPS)

# üåç –£–ª—É—á—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã DNS –∏ –ø—Ä–æ–∫—Å–∏ (AdGuardHome, Sing-box, HomeProxy)
CONFIG_LIBCURL_COOKIES=y             # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ cookies –≤ `libcurl`
CONFIG_LIBCURL_CRYPTO_AUTH=y         # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
CONFIG_LIBCURL_FILE=y                # –î–æ—Å—Ç—É–ø –∫ –ª–æ–∫–∞–ª—å–Ω—ã–º —Ñ–∞–π–ª–∞–º —á–µ—Ä–µ–∑ `libcurl`
CONFIG_LIBCURL_HTTP=y                # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTP (–≤–∞–∂–Ω–æ –¥–ª—è OpenWrt)
CONFIG_LIBCURL_NGHTTP2=y             # –í–∫–ª—é—á–∞–µ—Ç HTTP/2
CONFIG_LIBCURL_OPENSSL=y             # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç OpenSSL –¥–ª—è TLS
CONFIG_LIBCURL_PROXY=y               # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∫—Å–∏
CONFIG_LIBCURL_THREADED_RESOLVER=y   # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ DNS-–∑–∞–ø—Ä–æ—Å–æ–≤
CONFIG_LIBCURL_UNIX_SOCKETS=y        # –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É UNIX-—Å–æ–∫–µ—Ç–æ–≤ –≤ `libcurl`

# üõ† –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —è–¥—Ä–∞
CONFIG_KERNEL_TTY=y                   # UART-–∫–æ–Ω—Å–æ–ª—å (–≤–∞–∂–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
CONFIG_KERNEL_PRINTK_TIME=y           # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –≤ –ª–æ–≥–∞—Ö (–ª—É—á—à–µ –∞–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫)
CONFIG_KERNEL_STACKTRACE=y            # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ —Å—Ç–µ–∫–∞
CONFIG_KERNEL_DEBUG_INFO=y            # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —è–¥—Ä–µ

# üõë –£–¥–∞–ª—è–µ–º –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—É—Å–∫–æ—Ä—è–µ–º —Ä–∞–±–æ—Ç—É –ø—Ä–æ—à–∏–≤–∫–∏)
CONFIG_KERNEL_CGROUP_DEVICE=n         # –ö–æ–Ω—Ç—Ä–æ–ª—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —á–µ—Ä–µ–∑ cgroups (–Ω–µ –Ω—É–∂–µ–Ω)
CONFIG_KERNEL_CGROUP_FREEZER=n        # –ó–∞–º–æ—Ä–∞–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
CONFIG_KERNEL_CGROUP_HUGETLB=n        # –ö–æ–Ω—Ç—Ä–æ–ª—å HugeTLB —á–µ—Ä–µ–∑ cgroups (–Ω–µ –Ω—É–∂–µ–Ω)
CONFIG_KERNEL_CGROUP_NET_PRIO=n       # QoS –ª—É—á—à–µ —á–µ—Ä–µ–∑ nftables/SQM
CONFIG_KERNEL_CGROUP_PERF=n           # –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ cgroups (–Ω–µ –Ω—É–∂–µ–Ω)
CONFIG_KERNEL_NET_CLS_CGROUP=n        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ QoS —á–µ—Ä–µ–∑ cgroups (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SQM)
CONFIG_KERNEL_NETKIT=n                # –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ —Ñ–∏—á–∏ (–Ω–µ –Ω—É–∂–Ω—ã)
CONFIG_KERNEL_XDP_SOCKETS=n           # XDP —É—Å–∫–æ—Ä–µ–Ω–∏–µ (–Ω–µ –Ω—É–∂–Ω–æ –±–µ–∑ –æ—Å–æ–±–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
CONFIG_LIBCURL_TLS_SRP=n              # –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–µ—Ö–∞–Ω–∏–∑–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—É–¥–∞–ª—è–µ–º)

# Localization and Utilities
CONFIG_LUCI_LANG_ru=y

############################################################################

# Packages
CONFIG_PACKAGE_adguardhome=y
CONFIG_PACKAGE_autocore=y
CONFIG_PACKAGE_bind-dig=y
CONFIG_PACKAGE_blkid=y
CONFIG_PACKAGE_bsdtar=y
CONFIG_PACKAGE_ca-certificates=y
CONFIG_PACKAGE_cfdisk=y
CONFIG_PACKAGE_chinadns-ng=y
CONFIG_PACKAGE_coreutils-sort=y
CONFIG_PACKAGE_coreutils-timeout=y
CONFIG_PACKAGE_coreutils=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_dnsmasq_full_conntrack=y
CONFIG_PACKAGE_dnsmasq_full_dhcp=y
CONFIG_PACKAGE_dnsmasq_full_ipset=y
CONFIG_PACKAGE_dnsmasq_full_nftset=y
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_e2fsprogs=y
CONFIG_PACKAGE_ethtool=y
CONFIG_PACKAGE_f2fsck=y
CONFIG_PACKAGE_findutils=y
CONFIG_PACKAGE_gawk=y
CONFIG_PACKAGE_gdisk=y
CONFIG_PACKAGE_grep=y
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_hwclock=y
CONFIG_PACKAGE_internet-detector=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_ip6tables-nft=y
CONFIG_PACKAGE_iperf3=y
CONFIG_PACKAGE_ipset=y
CONFIG_PACKAGE_iptables-nft=y
CONFIG_PACKAGE_irqbalance=y
CONFIG_PACKAGE_kmod-br-netfilter=y
CONFIG_PACKAGE_kmod-crypto-gcm=y
CONFIG_PACKAGE_kmod-crypto-kpp=y
CONFIG_PACKAGE_kmod-crypto-rng=y
CONFIG_PACKAGE_kmod-crypto-sha256=y
CONFIG_PACKAGE_kmod-cryptodev=y
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_kmod-fs-squashfs=y
# –ù—É–∂–Ω–æ –µ—Å–ª–∏ rootfs –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç squashfs, –∞ squashfs –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–ª–µ—à-–Ω–∞–∫–æ–ø–∏—Ç–µ–ª–µ–π –∏–ª–∏ –∞—Ä—Ö–∏–≤–æ–≤).
# –ü—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ –ø—Ä–æ—à–∏–≤–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ ext4, –∞ squashfs —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º.
# –õ—É—á—à–µ –≤–∫–ª—é—á–∏—Ç—å CONFIG_KERNEL_FS_SQUASHFS –∏ CONFIG_KERNEL_FS_SQUASHFS_ZSTD, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É squashfs –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–¥—É–ª–µ–π.
# –ù–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ CONFIG_PACKAGE_kmod-fs-squashfs=y, –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ—è–≤–ª–µ–Ω–∏—é CONFIG_KERNEL_FS_SQUASHFS –∏ CONFIG_KERNEL_FS_SQUASHFS_ZSTD.
CONFIG_PACKAGE_kmod-inet-diag=y
CONFIG_PACKAGE_kmod-ipt-nat=y
CONFIG_PACKAGE_kmod-leds-gpio=y
CONFIG_PACKAGE_kmod-mdio-netlink=y
CONFIG_PACKAGE_kmod-mii=y
CONFIG_PACKAGE_kmod-netlink-diag=y
CONFIG_PACKAGE_kmod-nf-ipvs=y
CONFIG_PACKAGE_kmod-nf-nathelper-extra=y
CONFIG_PACKAGE_kmod-nf-nathelper=y
CONFIG_PACKAGE_kmod-nft-bridge=y
CONFIG_PACKAGE_kmod-nft-compat=y
CONFIG_PACKAGE_kmod-nft-queue=y
CONFIG_PACKAGE_kmod-nft-socket=y
CONFIG_PACKAGE_kmod-nft-tproxy=y
CONFIG_PACKAGE_kmod-phy-realtek=y
CONFIG_PACKAGE_kmod-r8125=y
CONFIG_PACKAGE_kmod-tls=y
CONFIG_PACKAGE_kmod-tun=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_libuci-lua=y
CONFIG_PACKAGE_libustream-openssl=y
CONFIG_PACKAGE_lsof=y
CONFIG_PACKAGE_luaposix=y
CONFIG_PACKAGE_luci-app-commands=y
CONFIG_PACKAGE_luci-app-homeproxy=y
CONFIG_PACKAGE_luci-app-internet-detector=y
CONFIG_PACKAGE_luci-app-youtubeUnblock=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-i18n-base-ru=y
CONFIG_PACKAGE_luci-i18n-commands-ru=y
CONFIG_PACKAGE_luci-i18n-firewall-ru=y
CONFIG_PACKAGE_luci-i18n-internet-detector-ru=y
CONFIG_PACKAGE_luci-i18n-package-manager-ru=y
CONFIG_PACKAGE_luci-lib-ipkg=y
CONFIG_PACKAGE_luci-theme-bootstrap=y
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_mailsend=y
CONFIG_PACKAGE_nano=y
CONFIG_PACKAGE_openssh-sftp-server=y
CONFIG_PACKAGE_openssl-util=y
CONFIG_PACKAGE_owut=y
CONFIG_PACKAGE_parted=y
CONFIG_PACKAGE_resolveip=y
CONFIG_PACKAGE_rpcd=y
CONFIG_PACKAGE_rsync=y
CONFIG_PACKAGE_sed=y
CONFIG_PACKAGE_sing-box=y
CONFIG_PACKAGE_tcpdump=y
CONFIG_PACKAGE_unzip=y
CONFIG_PACKAGE_youtubeUnblock=y
CONFIG_PACKAGE_zoneinfo-europe=y
############################################################################
############################################################################

# –ò—Å–∫–ª—é—á–∏—Ç—å
CONFIG_PACKAGE_automount=n
CONFIG_PACKAGE_block-mount=n
CONFIG_PACKAGE_cpufreq=n
CONFIG_PACKAGE_kmod-fs-exfat=n
CONFIG_PACKAGE_kmod-fs-ntfs3=n
CONFIG_PACKAGE_kmod-fs-vfat=n
CONFIG_PACKAGE_kmod-nls-cp437=n
CONFIG_PACKAGE_kmod-nls-iso8859-1=n
CONFIG_PACKAGE_kmod-nls-utf8=n
CONFIG_PACKAGE_kmod-usb-storage-extras=n
CONFIG_PACKAGE_kmod-usb-storage-uas=n
CONFIG_PACKAGE_ntfs3-mount=n
############################################################################
